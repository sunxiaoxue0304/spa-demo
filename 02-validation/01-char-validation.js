$(function(){var i=$("#rectangle-width"),a=$("#rectangle-height"),e=$("#rectangle-calc"),l=!1;function u(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function t(e){var t=e.target.selectionStart,n=e.target.value;if(/[abcdf-zABCDF-Z`~!@#$%^&*()\-=_+[\]{}|;:'",<>/?\\]/.test(e.key))e.preventDefault();else{if("."===e.key){if(0===t||-1!==n.indexOf("."))return void e.preventDefault();if(1===t&&"-"===n.substring(0,1))return void e.preventDefault()}if("e"===e.key){if(0===t||-1!==n.indexOf("e")||-1!==n.indexOf("E"))return void e.preventDefault();if(1===t&&"-"===n.substring(0,1))return void e.preventDefault()}if("E"===e.key){if(0===t||-1!==n.indexOf("e")||-1!==n.indexOf("E"))return void e.preventDefault();if(1===t&&"-"===n.substring(0,1))return void e.preventDefault()}}}function n(e){var t=$(e),n=$(e+"-validate"),r=$(e).attr("data-label");return""===t.val()?(n.html(r+"不能为空！"),t.select(),!1):/^-?(0|[1-9]\d*)(\.\d*)?([eE][+-]?\d+)?$/.test(t.val())?window.Number(t.val())<0?(n.html(r+"必须大于零"),t.select(),!1):(n.html(""),!0):(n.html(r+"必须是数值"),t.select(),!1)}e.click(function(){if(l){var e=Number(i.val()),t=Number(a.val()),n=u(2*e+2*t,2),r=u(e*t,2);$("#rectangle-perimeter").val(n),$("#rectangle-area").val(r)}}),i.keypress(function(e){t(e)}),a.keypress(function(e){t(e)}),i.focusout(function(){l=n("#rectangle-width")}),a.focusout(function(){l=n("#rectangle-height")})});